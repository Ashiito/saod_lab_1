# Программа для сортировки чисел и персональных данных

## Описание
Эта программа состоит из двух основных компонентов: генерации тестовых данных и их сортировки. 

1. **Генерация тестовых данных** (`generate_data.cpp`): Создает входные файлы `numbers.txt` и `people.txt` с тестовыми данными для последующей сортировки.
2. **Сортировка данных** (`main.cpp`): Реализует несколько алгоритмов сортировки для числовых массивов и лексикографической сортировки для персональных данных. Читает данные из файлов `numbers.txt` и `people.txt`, выполняет сортировку и записывает результаты в соответствующие выходные файлы. Также измеряется время выполнения каждого алгоритма.

## Генерация тестовых данных
Программа `generate_data.cpp` создает два файла:
- **numbers.txt**: Содержит 100,000 случайных целых чисел (от 0 до 1,000,000). Первая строка — количество чисел `n`, затем `n` чисел, каждое на новой строке.
- **people.txt**: Содержит 100,000 записей о людях. Первая строка — количество записей `m`, затем `m` строк с фамилией, именем и отчеством, выбранными случайным образом из заранее заданных списков.

### Особенности генерации
- Используется генератор случайных чисел `std::mt19937` для обеспечения высокого качества случайных данных.
- Прогресс генерации отображается каждые 10% (каждые 10,000 записей), с указанием времени выполнения.
- Для персональных данных используются списки из 10 фамилий, 10 имен и 10 отчеств, которые комбинируются случайным образом.
- Время генерации каждого файла выводится на консоль.

### Пример вывода генерации
```
Generating numbers.txt started
Generated 10000 numbers (10%) in 0.123 seconds
...
Generated 100000 numbers (100%) in 1.234 seconds
Generating numbers.txt completed in 1.234 seconds

Generating people.txt started
Generated 10000 records (10%) in 0.456 seconds
...
Generated 100000 records (100%) in 4.567 seconds
Generating people.txt completed in 4.567 seconds
```

## Алгоритмы сортировки
Для числовых массивов реализованы следующие алгоритмы:
- **Сортировка выбором (Selection Sort)**
- **Пузырьковая сортировка (Bubble Sort)**
- **Сортировка вставками (Insertion Sort)**
- **Сортировка слиянием (Merge Sort)**
- **Пирамидальная сортировка (Heap Sort)**
- **Быстрая сортировка (Quick Sort)**

Для персональных данных (структура `Person`, содержащая фамилию, имя и отчество) используется **быстрая сортировка** с лексикографическим сравнением, учитывающим:
1. Имя
2. Отчество
3. Вторую букву фамилии (если она существует)
4. Полную фамилию

## Зависимости
- Компилятор C++ (поддерживающий стандарт C++11 или выше)
- Стандартная библиотека C++ (`iostream`, `fstream`, `chrono`, `string`, `random`)

## Установка и запуск

### 1. Генерация тестовых данных
1. Скомпилируйте программу для генерации данных:
   ```bash
   g++ generate_data.cpp -o generate_data
   ```
2. Запустите программу для создания файлов `numbers.txt` и `people.txt`:
   ```bash
   ./generate_data
   ```

### 2. Сортировка данных
1. Скомпилируйте программу для сортировки:
   ```bash
   g++ main.cpp -o sorting_program
   ```
2. Убедитесь, что файлы `numbers.txt` и `people.txt` существуют (либо созданы с помощью `generate_data`).
3. Запустите программу для сортировки:
   ```bash
   ./sorting_program
   ```

### Формат входных файлов
- **numbers.txt**: Первая строка — количество чисел `n`, затем `n` целых чисел, каждое на новой строке.
  ```
  100000
  645231
  123456
  ...
  ```
- **people.txt**: Первая строка — количество записей `m`, затем `m` строк с фамилией, именем и отчеством.
  ```
  100000
  Ivanov Ivan Ivanovich
  Petrov Petr Petrovich
  ...
  ```

## Выходные файлы
- **Для числовых массивов**: Каждый алгоритм сортировки создает свой выходной файл:
  - `selection_sort.txt`
  - `bubble_sort.txt`
  - `insertion_sort.txt`
  - `merge_sort.txt`
  - `heap_sort.txt`
  - `quick_sort.txt`
  
  Каждый файл содержит отсортированный массив чисел, разделенных пробелами.

- **Для персональных данных**: Результат лексикографической сортировки записывается в файл `quick_sort_person.txt`, где каждая строка содержит фамилию, имя и отчество, разделенные пробелами.

## Пример вывода сортировки
При запуске программы `sorting_program` на консоль выводится размер входного массива чисел и время выполнения каждого алгоритма сортировки (в миллисекундах):
```
Array size: 100000
Selection Sort: 123.456 ms
Bubble Sort: 98.765 ms
Insertion Sort: 76.543 ms
Merge Sort: 54.321 ms
Heap Sort: 67.890 ms
Quick Sort: 45.678 ms
Quick Sort (Person): 32.109 ms
```

## Особенности реализации
- **Генерация данных**:
  - Используется функция `write_string` для записи строк в файл с ограничением длины (до 49 символов).
  - Прогресс генерации отображается для удобства отслеживания длительных операций.
- **Сортировка**:
  - **Ручная функция обмена (`manual_swap`)**: Используется для обмена элементов в массивах чисел и персональных данных, избегая стандартной функции `std::swap`.
  - **Динамическое выделение памяти**: Используется для массивов чисел и структур `Person`, с последующим освобождением памяти.
  - **Измерение времени**: Для каждого алгоритма сортировки измеряется время выполнения с помощью `std::chrono::high_resolution_clock`.
  - **Лексикографическая сортировка**: Учитывает иерархическое сравнение (имя → отчество → вторая буква фамилии → полная фамилия) для структуры `Person`.

## Примечания
- Убедитесь, что входные файлы `numbers.txt` и `people.txt` существуют и имеют правильный формат перед запуском `sorting_program`.
- Программа `generate_data` создает файлы с корректным форматом для последующей сортировки.
- В случае ошибок открытия файлов обе программы выводят сообщения об ошибке и завершают выполнение.
- Программа сортировки проверяет корректность входных данных (например, положительное количество элементов).
